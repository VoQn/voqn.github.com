var force=function(b){return b()},flip=function(b){return function(c,a){return b(a,c)}},isList=function(b){for(var c=[Array,NodeList,HTMLCollection],a,d=0;a=c[d];d++)if(b instanceof a)return!0;return!1},isEmpty=function(){for(var b in obj)return!1;return!0},map=function(b,c){var a,d,e;if(isList(c)){a=[];d=0;for(e=c.length;d<e;d++)a[d]=b(c[d],d);return a}a={};for(d in c)c.hasOwnProperty(d)&&(a[d]=b(c[d],d));return a},each=function(b,c){var a,d;if(isList(c)){a=0;for(d=c.length;a<d;a++)b(c[a],a)}else for(a in c)c.hasOwnProperty(a)&&
b(c[a],a)},filter=function(b,c){for(var a=[],d=0,e=0,g=c.length,f;d<g;d++)f=c[d],b(f,d)&&(a[e]=f,e++);return a},hasAny=function(b,c){for(var a=0,d=c.length;a<d;a++)if(b(c[a],a))return!0;return!1},hasAll=function(b,c){for(var a=0,d=c.length;a<d;a++)if(!b(c[a],a))return!1;return!0},foldLeft=function(b,c,a){for(var d=0,e=a.length;d<e;d++)b=c(a[d],b);return b},foldRight=function(b,c,a){for(var d=a.length-1;-1<d;d--)b=c(a[d],b);return b},sumOf=function(b){for(var c=0,a=0,d=b.length;a<d;a++)c+=b[a];return c},
supplement=function(b,c,a){return void 0===c?b:void 0===a?c:a(b,c)},Tuple=function(b,c){this.fst=b;this.snd=c},tuple=function(b,c){return new Tuple(b,c)},Interface=function(b,c){if(2!=arguments.length)throw Error("Interface constructor called with "+arguments.length+"arguments, but expected exactly 2.");this.name=b;this.methods=[];for(var a=0,d=c.length;a<d;a++){if("string"!==typeof c[a])throw Error("Interface constructor expects method names to be passed in as a string");this.methods.push(c[a])}};
Interface.ensureImplements=function(b,c,a){if(2>arguments.length)throw Error("Function Interface.ensureImplements called with "+arguments.length+"arguments, but expected at least 2.");for(var d=1,e=0,g,f;f=arguments[d];d++){if(f.constructor!==Interface)throw Error("Function Interface.ensureImplements expects arguments two and above to be instance of Interface.");for(;g=f.methods[e];e++)if(!b[g]||"function"!==typeof b[g])throw Error("Function Interface.ensureImplements: object does not implement the "+
f.name+" interface. Method "+g+" was not found.");}};
var currentResult=function(){return new function(){this.skipped=this.passed=!1;this.reason="Test has not run yes";this.arguments=[]}}(),skippedTest=function(){return new function(){this.wasSkipped=!0;return this}}(),forAll=function(b,c){var a=isList(b)?b:[a],d=[],e;return function(b){d=map(function(a){return a(b)},a);try{e=c.apply(c,d)}catch(f){return currentResult.passed=!1,currentResult.skipped=!1,currentResult.reason="Exception occurred: "+f,currentResult.arguments=d,currentResult}e.wasSkipped?
(currentResult.passed=!1,currentResult.skipped=!0,currentResult.reason="Skipped: ("+d.join(", ")+")"):(currentResult.passed=e,currentResult.skipped=!1,currentResult.reason=e?"":"Falsible: ("+d.join(", ")+")");currentResult.arguments=d;return currentResult}},where=function(b,c){for(var a=0,d=b.length;a<d;a++)if(!b[a])return skippedTest;return c()},score=function(){var b=new function(){this.ok=!1;this.skipped=this.failure=this.passed=0;this.message="Test has not run";return this};b.clear=function(){this.ok=
!1;this.failure=this.skipped=this.passed=0;this.message="Test has not run";return this};b.evaluate=function(){this.ok=0===this.failure;this.message=(this.ok?"\u2713 OK, passed "+this.passed+"":"\u2718 Failed. after "+this.passed+this.skipped)+" tests."+(0<this.skipped?" \u2662 skipped "+this.skipped+" cases":"");return this};return b}(),seed=function(){var b=new function(){};b.linear=function(b,a){var d=supplement(1,b,Math.max),e=supplement(0,a);return function(a){return d*a+e}};b.quadratic=function(b,
a,d){var e=supplement(1,b),g=supplement(0,a),f=supplement(0,d);return function(a){return e*a*a+g*a+f}};b.exponent=function(b,a){var d=supplement(2,b,Math.max),e=supplement(1,a);return function(a){return Math.pow(d,Math.round(a*e))}};b.logarithm=function(b,a,d){var e=supplement(1,b),g=supplement(2,a,Math.max),f=supplement(0,d);return function(){return Math.log(value*e)/Math.log(g)+f}};return b}(),combinator=function(){var b=new function(){};b.sized=function(b){var a=seed.exponent(2,0.5);return function(d){return b(a(d))}};
b.resize=function(b,a){return function(d){return a(b(d))}};b.choose=function(b,a){var d,e;return function(){d=Math.random()*b;e=Math.random()*a;return Math.min(a,Math.max(b,d+e))}};b.elements=function(c){var a=b.choose,d=c.length,e=0;return function(){e=Math.round(a(0,d)());return c[e]}};b.oneOf=function(c){var a=b.elements(c);return function(){return a()()}};b.listOf=function(c){var a=seed.linear(1),d=b.resize,e=b.vectorOf,g=function(a){return e(a,c)()};return function(b){return d(a,g)(Math.round(Math.random()*
b))}};b.listOf1=function(c){var a=seed.linear(1,1),d=b.vectorOf,e=b.resize,g=function(a){return d(a,c)()};return function(b){return e(a,g)(Math.round(Math.random()*b))}};b.vectorOf=function(b,a){var d=0,e=[];return function(){d=0;for(e=[];d<b;d++)e[d]=a();return e}};b.frequency=function(c){var a=b.choose,d=map(function(a){return a.fst},c),e=map(function(a){return a.snd},c),g=sumOf(d),f=0,h,i;return function(){i=a(1,g)();for(f=0;h=d[f];f++){if(i<h)return e[f]();i-=h}return e[f-1]()}};return b}(),generateReference=
function(){var b=combinator.choose,c=combinator.listOf,a=combinator.frequency,d=combinator.sized,e=combinator.elements,g=new function(){},f,h,i,l=a([tuple(400,b(65,122)),tuple(300,b(48,57)),tuple(150,b(31,47)),tuple(140,b(123,127)),tuple(7,b(128,55295)),tuple(2,b(57344,65533)),tuple(1,b(65536,1114111))]),j=65,m=function(){j=l();return Math.round(j)},n=c(m),k=function(a,b){if("prototype"==a||"register"==a)throw Error("GenerateRefference."+a+" should not overwrite");g[a]=b;return g};g.register=function(a,
b){2===arguments.length&&"string"===typeof a&&"function"===typeof b?k(a,b):each(flip(k),a);return this};g.register({"boolean":e([!1,!0]),integer:d(function(a){a=b(-a,a)();return Math.round(a)}),number:d(function(a){f=b(0,a)();h=b(1E16*-f,1E16*f)();i=b(1,1E16)();return h/i}),charCode:m,charactor:function(){return String.fromCharCode(m())},string:function(a){return String.fromCharCode.apply(null,n(a))}});return g}(),arbitrary=function(b,c){var a=Array.prototype.slice.call(arguments);return new arbitrary.fn.init(a)};
arbitrary.fn=arbitrary.prototype=function(){var b=/\[\s?([a-z]+)\s?\]/,c=function(a){var d=b.exec(a),c=combinator.listOf;return d?c(generateReference[d[1]]):generateReference[a]};return{constructor:arbitrary,init:function(a){this.length=a.length;this.types=a;return this},types:[],length:0,size:function(){return this.length},property:function(a){var b,e=this.types;try{b=map(c,e)}catch(g){console&&console.log&&console.log(g)}return forAll(b,a)},sample:function(a){var a=supplement(10,a,function(a,b){return Math.max(1,
b)}),b=0,e,g,f=[];try{e=map(c,this.types)}catch(h){console&&console.log&&console.log(h)}for(;b<a;b++)g=map(function(a){return a(b)},e),console&&console.log&&console.log(1===g.length?g[0]:g),f.push(g);return f}}}();arbitrary.fn.init.prototype=arbitrary.fn;
var checker=function(){var b=[],c=!1,a=!1,d=!1,e="",g={skipped:"\u2662",passed:"\u2713",faild:"\u2718"},f=new function(){};f.run=function(f,l,j){f=l(f);b=f.arguments;f.skipped?a=!0:(a=!1,c=f);a?(f="skipped",j.skipped++):c?(f="passed",j.passed++):(f="faild",j.failure++,d=!0);e=g[f]+" ( "+map(h,b).join(", ")+" )";return{shouldView:d,current:e}};var h=function(a){return"string"===typeof a?'"'+a+'"':a+""};return f}(),ViewInterface=new Interface("ViewInterface","getTestCount standby clean putMsg putLog dump highlight".split(" ")),
View=function(){},createView=function(b){var c=new View,a="";for(a in b)c[a]=b[a];Interface.ensureImplements(c,ViewInterface);return c},consoleView=function(){var b="";return createView({getTestCount:function(){return 100},standby:function(){console.clear&&console.clear();b=""},clean:function(){b=""},putMsg:function(b){console.log(b)},putLog:function(c){b+=c+"\n"},dump:function(){0<b.length&&console.log(b)},highlight:function(b,a){return a}})}(),htmlView=function(){var b=[],c=0;return createView({selectors:{counter_id:"test-count",
messenger_id:"test-message",logger_id:"test-log"},setSelectors:function(a){var b=this.selectors,c="";for(c in b){if(void 0===a[c])throw Error("html-test-view need selector id :"+c+", but undefined");this.selectors[c]=a[c]}return this},getTestCount:function(){return parseInt(document.getElementById(this.selectors.counter_id).value,10)},standby:function(){b=[];c=0},clean:function(){b=[]},putMsg:function(a){document.getElementById(this.selectors.messenger_id).innerHTML=a},putLog:function(a,d){b[c]=!d?
a:htmlEscape(a);c++},dump:function(){document.getElementById(this.selectors.logger_id).innerHTML=b.join("<br>");b=[];c=0},highlight:function(a,b){return'<span class="'+(a?"passed":"failed")+'">'+b+"</span>"}})}(),macchiato=function(){var b=new function(){},c=consoleView,a=[],d=0,e=!1,g,f,h,i,l,j=function(a,b){var j=checker.run,k=c.putLog;for(d=0;d<g;d++)h=j(d,a,score),h.shouldView&&k(h.current,!0);l=score.evaluate();e=l.ok;i=(b?b+" : ":"")+l.message;k(f(e,i));score.clear();return e},m=function(a,
b){var j=checker.run,k=c.putLog;for(d=0;d<g;d++)h=j(d,a,score),k(h.current,!0);l=score.evaluate();e=l.ok;i=(b?b+" : ":"")+l.message;k(f(e,i));score.clear();return e},n=!0,k=0,o,p="",q,r;b.setVerbose=function(a){c.verbose=a;return this};b.setView=function(a){Interface.ensureImplements(a,ViewInterface);c=a;return this};b.stock=function(b){a.push(b);return this};b.taste=function(){c.standby();q=c.verbose?m:j;g=c.getTestCount();f=c.highlight;for(k=0;o=a[k];k++)for(p in o)r=o[p],n=n&&q(r,p);c.dump();c.putMsg(n?
"Ok, All tests succeeded!!":"Oops! failed test exist...");return this};return b}();window.macchiato=macchiato;
